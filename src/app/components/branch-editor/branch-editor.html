<div class="branch-editor">
  <div class="branch-settings-panel">
    <app-author-panel-header 
      title="Branch Settings" 
      description="Configure the selected branch properties">
    </app-author-panel-header>

    <div class="settings-form">
      <!-- Branch Information Section -->
      <div class="settings-section">
        <h4>Branch Information</h4>

        <mat-card class="branch-info-card">
          <mat-card-content>
            <div class="branch-relationship">
              <div class="node-info">
                <mat-icon>account_tree</mat-icon>
                <span class="node-name">{{ parentNodeName() }}</span>
              </div>
              <mat-icon class="arrow-icon">arrow_forward</mat-icon>
              <div class="node-info">
                <mat-icon>{{
                  selectedBranchData().child.children.length === 0
                    ? "circle"
                    : "account_tree"
                }}</mat-icon>
                <span class="node-name">{{ childNodeName() }}</span>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <hr class="section-divider" />

      <!-- Branch Properties Section -->
      <div class="settings-section">
        <h4>Branch Properties</h4>

        <!-- Branch Length -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Branch Length</mat-label>
          <input
            matInput
            type="number"
            [(ngModel)]="branchLengthValue"
            placeholder="Enter branch length"
            step="1"
            min="0"
          />
          <mat-icon matSuffix>timeline</mat-icon>
          <mat-hint>Evolutionary distance to parent</mat-hint>
        </mat-form-field>

        <!-- Branch Color -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Branch Color</mat-label>
          <input
            matInput
            type="color"
            [(ngModel)]="branchColorValue"
            placeholder="Select branch color"
          />
          <mat-icon matSuffix>palette</mat-icon>
          <mat-hint>Visual color for this branch</mat-hint>
        </mat-form-field>

        <!-- Branch Width -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Branch Width</mat-label>
          <input
            matInput
            type="number"
            [(ngModel)]="branchWidthValue"
            placeholder="Enter branch width (leave empty for default)"
            step="0.5"
            min="0.5"
            max="10"
          />
          <mat-icon matSuffix>line_weight</mat-icon>
          <mat-hint>Width in pixels (empty = use default)</mat-hint>
        </mat-form-field>

        <!-- Branch Label (placeholder for future) -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Branch Label</mat-label>
          <input
            matInput
            type="text"
            placeholder="Enter branch annotation"
            disabled
          />
          <mat-icon matSuffix>label</mat-icon>
          <mat-hint>Optional branch annotation</mat-hint>
        </mat-form-field>
      </div>

      <hr class="section-divider" />

      <!-- Branch Actions Section -->
      <div class="settings-section">
        <h4>Branch Actions</h4>

        <div class="action-buttons">
          <button mat-raised-button color="primary" (click)="onSplitBranch()">
            <mat-icon>call_split</mat-icon>
            Split Branch
          </button>

          <button mat-raised-button (click)="onResetBranchLength()">
            <mat-icon>refresh</mat-icon>
            Reset Length
          </button>

          <button mat-raised-button (click)="onResetBranchColor()">
            <mat-icon>color_lens</mat-icon>
            Reset Color
          </button>

          <button mat-raised-button (click)="onResetBranchWidth()">
            <mat-icon>line_weight</mat-icon>
            Reset Width
          </button>

          <button mat-raised-button color="warn" (click)="onRemoveBranch()">
            <mat-icon>delete</mat-icon>
            Remove Branch
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
