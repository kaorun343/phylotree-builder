<div class="tree-editor">
  <div class="svg-settings-panel">
    <app-author-panel-header 
      title="Tree Settings" 
      description="Configure the tree visualization">
    </app-author-panel-header>

    <mat-tab-group class="settings-tabs">
      <mat-tab label="Canvas">
        <div class="tab-content">
          <div class="settings-form">
            <!-- Canvas Dimensions Section -->
            <div class="settings-section">
              <h4>Canvas Dimensions</h4>

              <div class="two-column-fields">
                <!-- Canvas Width -->
                <mat-form-field appearance="outline" class="half-width">
                  <mat-label>Canvas Width</mat-label>
                  <input
                    matInput
                    type="number"
                    [(ngModel)]="width"
                    placeholder="Enter canvas width"
                  />
                  <mat-icon matSuffix>straighten</mat-icon>
                  <mat-hint>Width in pixels</mat-hint>
                </mat-form-field>

                <!-- Canvas Height -->
                <mat-form-field appearance="outline" class="half-width">
                  <mat-label>Canvas Height</mat-label>
                  <input
                    matInput
                    type="number"
                    [(ngModel)]="height"
                    placeholder="Enter canvas height"
                  />
                  <mat-icon matSuffix>height</mat-icon>
                  <mat-hint>Height in pixels</mat-hint>
                </mat-form-field>
              </div>
            </div>

            <hr class="section-divider" />

            <!-- Margin Controls Section -->
            <div class="settings-section">
              <h4>Margins</h4>

              <!-- Root Side Margin -->
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Root Side Margin ({{ rootSidePhysicalDirection }})</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="marginRoot"
                  placeholder="Enter root side margin ({{ rootSidePhysicalDirection.toLowerCase() }})"
                />
                <mat-icon matSuffix>keyboard_arrow_left</mat-icon>
                <mat-hint>{{ rootSidePhysicalDirection }} margin in pixels</mat-hint>
              </mat-form-field>

              <!-- Leaf Side Margin -->
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Leaf Side Margin ({{ leafSidePhysicalDirection }})</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="marginLeaf"
                  placeholder="Enter leaf side margin ({{ leafSidePhysicalDirection.toLowerCase() }})"
                />
                <mat-icon matSuffix>keyboard_arrow_right</mat-icon>
                <mat-hint>{{ leafSidePhysicalDirection }} margin in pixels</mat-hint>
              </mat-form-field>

              <!-- Perpendicular Margins -->
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Perpendicular Margins ({{ perpendicularPhysicalDirections }})</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="marginPerpendicular"
                  placeholder="Enter perpendicular margins ({{ perpendicularPhysicalDirections.toLowerCase() }})"
                />
                <mat-icon matSuffix>expand_more</mat-icon>
                <mat-hint>{{ perpendicularPhysicalDirections }} margins in pixels</mat-hint>
              </mat-form-field>
            </div>

            <hr class="section-divider" />

            <div class="panel-actions">
              <button mat-button (click)="resetToDefaults()">
                <mat-icon>refresh</mat-icon>
                Reset to Defaults
              </button>
            </div>
          </div>
        </div>
      </mat-tab>

      <mat-tab label="Layout">
        <div class="tab-content">
          <div class="settings-form">
            <!-- Tree Direction Section -->
            <div class="settings-section">
              <h4>Tree Direction</h4>

              <!-- Tree Direction Select -->
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Direction</mat-label>
                <mat-select
                  [(ngModel)]="treeDirection"
                  [value]="treeDirection()"
                >
                  @for (option of treeDirectionOptions; track option.value) {
                  <mat-option [value]="option.value">
                    {{ option.label }}
                  </mat-option>
                  }
                </mat-select>
                <mat-icon matSuffix>explore</mat-icon>
                <mat-hint>Choose tree growth direction</mat-hint>
              </mat-form-field>
            </div>

            <hr class="section-divider" />

            <!-- Root Branch Section -->
            <div class="settings-section">
              <h4>Root Branch</h4>

              <!-- Root Branch Length -->
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Root Branch Length</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="rootBranchLength"
                  placeholder="Enter root branch length"
                  step="10"
                  min="0"
                />
                <mat-icon matSuffix>straighten</mat-icon>
                <mat-hint>Length of the root branch in pixels</mat-hint>
              </mat-form-field>
            </div>

            <hr class="section-divider" />

            <!-- Branch Appearance Section -->
            <div class="settings-section">
              <h4>Branch Appearance</h4>

              <!-- Global Branch Width -->
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Default Branch Width</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="branchWidth"
                  placeholder="Enter default branch width"
                  step="0.5"
                  min="0.5"
                  max="10"
                />
                <mat-icon matSuffix>line_weight</mat-icon>
                <mat-hint>Default width for all branches in pixels</mat-hint>
              </mat-form-field>
            </div>

            <hr class="section-divider" />

            <div class="panel-actions">
              <button mat-button (click)="resetToDefaults()">
                <mat-icon>refresh</mat-icon>
                Reset to Defaults
              </button>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
